{"version":3,"sources":["../node_modules/echarts/lib/chart/line.js","../node_modules/echarts/lib/chart/helper/Symbol.js","../node_modules/echarts/lib/chart/line/helper.js","../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../node_modules/echarts/lib/component/legend.js","../node_modules/echarts/lib/chart/line/LineSeries.js","../node_modules/echarts/lib/chart/line/LineView.js","../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../node_modules/echarts/lib/chart/helper/labelHelper.js","../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../node_modules/echarts/lib/chart/line/poly.js","../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../node_modules/echarts/lib/visual/symbol.js","../node_modules/echarts/lib/layout/points.js","../node_modules/echarts/lib/processor/dataSample.js","../node_modules/echarts/lib/component/gridSimple.js","../node_modules/echarts/lib/coord/cartesian/Grid.js","../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../node_modules/echarts/lib/coord/cartesian/GridModel.js","../node_modules/echarts/lib/coord/axisModelCreator.js","../node_modules/echarts/lib/coord/axisDefault.js","../node_modules/echarts/lib/component/axis.js","../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/legend/legendFilter.js"],"names":["echarts","require","visualSymbol","layoutPoints","dataSample","registerVisual","registerLayout","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","zrUtil","createSymbol","graphic","parsePercent","getDefaultLabel","SymbolClz","data","idx","seriesScope","Group","call","this","updateData","symbolProto","prototype","getSymbolSize","symbolSize","getItemVisual","Array","slice","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolType","keepAspect","removeAll","color","symbolPath","attr","z2","culling","scale","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","seriesModel","hostModel","isInit","updateProps","_updateCommon","fadeIn","target","style","opacity","initProps","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","incremental","useHoverLayer","__symbolOriginalScale","ratio","emphasisOpt","Math","max","animateTo","type","useStyle","strokeNoScale","setStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","itemStyle","hoverItemStyle","symbolRotate","symbolOffset","labelModel","hoverLabelModel","hoverAnimation","cursorStyle","hasItemOption","itemModel","getItemModel","getModel","getItemStyle","getShallow","extend","elStyle","PI","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","opt","getName","isRectText","autoColor","hoverStyle","isAnimationEnabled","setHoverStyle","fadeOut","cb","keepLabel","text","dataIndex","inherits","_default","module","exports","isDimensionStacked","map","prepareDataCoordInfo","coordSys","valueOrigin","stacked","baseAxis","getBaseAxis","valueAxis","getOtherAxis","valueStart","extent","getExtent","getValueStart","baseAxisDim","dim","valueAxisDim","valueDim","mapDimension","baseDim","baseDataOffset","dims","dimensions","coordDim","stackResultDim","getCalculationInfo","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","value","NaN","get","isNaN","stackedData","dataToPoint","ComponentModel","axisModelCreator","axisModelCommonMixin","AxisModel","axis","init","superApply","arguments","resetRange","mergeOption","restoreData","getCoordSysModel","ecModel","queryComponents","mainType","index","option","gridIndex","id","gridId","getAxisType","axisDim","merge","extraOption","offset","legendFilter","Component","SERIES_FILTER","registerSubTypeDefaulter","__DEV__","createListFromArray","dependencies","getInitialData","getSource","useEncodeDefaulter","defaultOption","coordinateSystem","legendHoverLink","clip","label","position","lineStyle","width","step","smooth","smoothMonotone","symbol","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","Infinity","SymbolDraw","lineAnimationDiff","modelUtil","_poly","Polyline","Polygon","ChartView","_helper","_createClipPathFromCoordSys","createGridClipPath","createPolarClipPath","isPointsSame","points1","points2","length","i","p1","p2","getSmooth","turnPointsIntoStep","points","stepTurnAt","baseIndex","stepPoints","nextPt","pt","push","stepPt","middle","stepPt2","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","axisExtent","availSize","abs","count","dataLen","round","isHorizontal","canShowAllSymbolForCategory","categoryDataDim","labelMap","each","getViewLabels","labelItem","tickValue","hasOwnProperty","createLineClipPath","hasAnimation","clipPath","rectShape","shape","expandSize","height","y","x","lineGroup","symbolDraw","group","_symbolDraw","_lineGroup","render","api","getData","lineStyleModel","areaStyleModel","mapArray","getItemLayout","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","isAreaChart","isEmpty","stackedOnPoints","len","getStackedOnPoints","isIgnoreFunc","oldData","_data","eachItemGraphicEl","el","__temp","remove","setItemGraphicEl","clipShapeForSymbol","getArea","r0","r1","_clipShapeForSymbol","_step","_newPolygon","setClipPath","isIgnore","clipShape","_stackedOnPoints","_points","_updateAnimation","setShape","_newPolyline","visualColor","visualMetaList","getVisual","visualMeta","dimIndex","dimension","dimName","dimInfo","getDimensionInfo","getAxis","colorStops","stops","stop","coord","toGlobalCoord","dataToCoord","stopLen","outerColors","reverse","minCoord","maxCoord","coordSpan","unshift","gradient","LinearGradient","getVisualGradient","defaults","getLineStyle","fill","stroke","lineJoin","stackedOnSeries","stackedOnSmooth","getAreaStyle","_valueOrigin","dispose","payload","queryDataIndex","getItemGraphicEl","contain","ignore","diff","current","stackedOnCurrent","next","stackedOnNext","__points","updatedDataInfo","diffStatus","status","cmd","idx1","ptIdx","animators","during","isObject","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","point","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","newIdx","symbolEl","update","oldIdx","execute","isPersistent","updateLayout","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","start","end","traverse","enableAnimation","retrieveRawValue","labelDims","vals","val","join","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","getRawIndex","rawIndex","sort","a","b","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","Path","vec2","fixClipWithShadow","vec2Min","min","vec2Max","scaleAndAdd","v2Copy","copy","v","cp0","cp1","isPointNull","p","drawSegment","ctx","segLen","allLen","dir","smoothMin","smoothMax","drawMono","apply","drawNonMono","prevIdx","k","prevP","ctrlLen","bezierCurveTo","lineTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","sub","dist","getBoundingBox","smoothConstraint","ptMin","ptMax","brush","buildPath","result","bbox","stackedOnBBox","closePath","cartesian","rect","lineWidth","Rect","polar","sectorArea","Sector","cx","cy","r","startAngle","endAngle","clockwise","createClipPath","isFunction","seriesType","defaultSymbolType","legendSymbol","performRawSeries","reset","hasSymbolTypeCallback","hasSymbolSizeCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","symbolKeepAspect","isSeriesFiltered","dataEach","rawValue","getRawValue","params","getDataParams","setItemVisual","itemSymbolType","itemSymbolSize","itemSymbolKeepAspect","createRenderPlanner","plan","isLargeRender","pipelineContext","large","dimLen","progress","segCount","Float32Array","tmpIn","tmpOut","setItemLayout","setLayout","samplers","average","frame","sum","isFinite","nearest","indexSampler","modifyOutputEnd","sampler","size","rate","setData","downSample","extendComponentView","gridModel","getRect","registerPreprocessor","xAxis","yAxis","grid","_util","indexOf","getLayoutRect","retrieve","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","CoordinateSystem","getStackedDimension","isAxisUsedInTheGrid","axisModel","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","model","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","getAxesOnZeroOf","otherAxisOnZeroOf","otherAxes","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","axisPointerEnabled","_rect","_updateScale","resize","ignoreContainLabel","gridRect","getBoxLayoutParams","getWidth","getHeight","axesList","adjustAxes","inverse","setExtent","coordBase","axisExtentSum","toLocalCoord","updateAxisTransform","labelUnionRect","margin","axisType","axisIndex","axesMapOnDim","name","getAxes","getCartesian","xAxisIndex","yAxisIndex","key","coordList","getCartesians","convertToPixel","finder","_findConvertTarget","convertFromPixel","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","componentIndex","containPoint","axisPositionUsed","left","right","top","bottom","axesCount","eachComponent","createAxisCreator","axisPosition","isCategory","onBand","addAxis","unionExtent","unionExtentFromData","eachSeries","isCartesian2D","axesModels","findAxesModels","getTooltipAxes","baseAxes","otherAxis","axesTypes","create","grids","register","BoundingRect","Cartesian","constructor","axisX","axisY","containData","reserved","out","clampData","xScale","yScale","xAxisExtent","yAxisExtent","parse","xExtent","getGlobalExtent","yExtent","dimAxisMapper","_axes","_dimList","scaleType","toLowerCase","filter","_dataCoordConvert","input","method","dimList","output","Axis","coordExtent","asc","ret","clamp","layoutMode","show","containLabel","backgroundColor","borderWidth","borderColor","axisDefault","_layout","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","axisName","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","__ordinalMeta","createByAxisModel","getCategories","rawData","categories","getOrdinalMeta","mergeAll","curry","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","tooltip","axisPointer","axisLine","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","fontSize","splitLine","splitArea","areaStyle","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","logAxis","logBase","AxisBuilder","AxisView","cartesianAxisHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","axisPointerClass","oldAxisGroup","_axisGroup","layout","axisBuilder","getGroup","groupTransition","superCall","_splitAreaColors","_splitLine","isBlank","splitLineModel","lineColors","isArray","lineCount","ticksCoords","getTicksCoords","tickModel","tickCoord","colorIndex","Line","anid","subPixelOptimize","x1","y1","x2","y2","_minorSplitLine","minorTicksCoords","getMinorTicksCoords","_splitArea","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","createHashMap","cIndex","prev","set","Model","isNameSpecified","langSelector","legend","selector","defaultSelectorOption","all","title","clone","LegendModel","extendComponentModel","ignoreSize","parentModel","selected","_updateSelector","item","isString","_updateData","legendData","hasSelected","isSelected","select","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendVisualProvider","names","getAllNames","concat","_availableNames","dataItem","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","orient","align","borderRadius","padding","itemGap","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","textStyle","selectedMode","selectorLabel","fontFamily","emphasis","selectorPosition","selectorItemGap","selectorButtonGap","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","legendModel","isItemSelected","registerAction","makeBackground","layoutUtil","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","viewportSize","maxSize","mainRect","layoutInner","layoutRect","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","getSeriesByName","legendSymbolType","_createItem","on","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","provider","containName","indexOfName","newline","_createSelector","selectorGroup","selectorItem","labelText","Text","verticalAlign","onclick","dispatchAction","emphasisLabelModel","createSelectorButton","legendModelItemStyle","itemGroup","textStyleModel","itemIcon","tooltipModel","legendGlobalTooltipModel","setSymbolStyle","legendSymbolCenter","textX","textAlign","formatter","content","replace","setTextStyle","textFill","getTextColor","textVerticalAlign","hitRect","getBoundingRect","invisible","formatterParams","componentType","legendIndex","$vars","eachChild","child","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","orientIdx","wh","hw","yx","dataName","getZr","storage","getDisplayList","layoutBox","positionElement","formatUtil","componentModel","boxLayoutParams","normalizeCssArray","legendModels","findComponents","filterSeries","series"],"mappings":"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","file":"gb/static/js/0.4c98c5a2.chunk.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  } else {\n    symbolPath.setStyle({\n      opacity: null,\n      shadowBlur: null,\n      shadowOffsetX: null,\n      shadowOffsetY: null,\n      shadowColor: null\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clip: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createGridClipPath = _createClipPathFromCoordSys.createGridClipPath;\nvar createPolarClipPath = _createClipPathFromCoordSys.createPolarClipPath;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction createLineClipPath(coordSys, hasAnimation, seriesModel) {\n  if (coordSys.type === 'cartesian2d') {\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n\n    return clipPath;\n  } else {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step');\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r1 += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function () {},\n  highlight: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(pt[0], pt[1])) {\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function (frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = extent[1] - extent[0];\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid \n//  Cartesian2D \nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By defualt auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5,\n  // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Same inside with axisTick\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#eee',\n      width: 1\n    }\n  }\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    this._splitAreaColors = null;\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = this._splitAreaColors;\n    var newSplitAreaColors = zrUtil.createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n\n      this._axisGroup.add(new graphic.Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: zrUtil.defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        silent: true\n      }));\n\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    this._splitAreaColors = newSplitAreaColors;\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;"],"sourceRoot":""}